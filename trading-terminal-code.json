{
  "name": "miyamoto-trading-terminal",
  "version": "1.0.0",
  "description": "AI-powered crypto trading terminal",
  "files": {
    "app/layout.tsx": "import type { Metadata } from \"next\"\nimport { Providers } from \"./providers\"\nimport \"./globals.css\"\n\nexport const metadata: Metadata = {\n  title: \"Miyamoto Terminal | By Miyamoto Labs\",\n  description: \"AI-powered crypto trading terminal with real-time data, news, and community chat\",\n}\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode\n}>) {\n  return (\n    <html lang=\"en\" className=\"dark\">\n      <body className=\"antialiased\">\n        <Providers>{children}</Providers>\n      </body>\n    </html>\n  )\n}\n",
    "app/wallet-provider.tsx": "'use client'\n\nimport { FC, ReactNode } from 'react'\nimport { RainbowKitProvider, getDefaultConfig, darkTheme } from '@rainbow-me/rainbowkit'\nimport { WagmiProvider } from 'wagmi'\nimport { arbitrum, mainnet, base, optimism, polygon } from 'wagmi/chains'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\n\nimport '@rainbow-me/rainbowkit/styles.css'\n\n// Configure chains and wallets\nconst config = getDefaultConfig({\n  appName: 'Miyamoto Terminal',\n  projectId: 'miyamoto-terminal', // WalletConnect project ID (optional for Rabby/MM)\n  chains: [arbitrum, mainnet, base, optimism, polygon],\n  ssr: true,\n})\n\nconst queryClient = new QueryClient()\n\ninterface Props {\n  children: ReactNode\n}\n\nexport const WalletProviders: FC<Props> = ({ children }) => {\n  return (\n    <WagmiProvider config={config}>\n      <QueryClientProvider client={queryClient}>\n        <RainbowKitProvider \n          theme={darkTheme({\n            accentColor: '#00ff88',\n            accentColorForeground: 'black',\n            borderRadius: 'medium',\n          })}\n          modalSize=\"compact\"\n        >\n          {children}\n        </RainbowKitProvider>\n      </QueryClientProvider>\n    </WagmiProvider>\n  )\n}\n",
    "app/page.tsx": "\"use client\"\n\nimport { useSession } from \"next-auth/react\"\nimport { useState, useEffect, useRef } from \"react\"\nimport Script from \"next/script\"\nimport { ConnectButton } from \"@rainbow-me/rainbowkit\"\nimport { useAccount } from \"wagmi\"\n\ndeclare global {\n  interface Window {\n    TradingView: any\n    Chart: any\n    Jupiter: any\n  }\n}\n\nexport default function Dashboard() {\n  const { data: session, status } = useSession()\n  const { address, isConnected } = useAccount()\n  const [wallet, setWallet] = useState(\"0xF1CcD889c2b340636A567DfF3f1d157f7FFD00dB\")\n  \n  // Use connected wallet for Hyperliquid when available\n  useEffect(() => {\n    if (isConnected && address) {\n      console.log('Wallet connected:', address)\n      setWallet(address)\n    }\n  }, [isConnected, address])\n  \n  // Manual wallet input for non-connected viewing\n  const [showWalletInput, setShowWalletInput] = useState(false)\n  const [walletInput, setWalletInput] = useState(\"\")\n  const [tweets, setTweets] = useState<any[]>([])\n  const [news, setNews] = useState<any[]>([])\n  const [newsSource, setNewsSource] = useState(\"crypto\")\n  const [portfolio, setPortfolio] = useState<any>(null)\n  const [positions, setPositions] = useState<any[]>([])\n  const [trades, setTrades] = useState<any[]>([])\n  const [prices, setPrices] = useState<any>({})\n  const [fundingRates, setFundingRates] = useState<any>({})\n  const [fearGreed, setFearGreed] = useState({ value: 50, label: \"Neutral\" })\n  const [activeTab, setActiveTab] = useState(\"portfolio\")\n  const [currentAsset, setCurrentAsset] = useState(\"BTC\")\n  const [currentInterval, setCurrentInterval] = useState(\"15\")\n  const [fundingCountdown, setFundingCountdown] = useState(\"--:--:--\")\n  const [whaleAlerts, setWhaleAlerts] = useState<any[]>([])\n  const [clock, setClock] = useState(\"\")\n  const [showJournalModal, setShowJournalModal] = useState(false)\n  const [showTradeModal, setShowTradeModal] = useState(false)\n  const [journalText, setJournalText] = useState(\"\")\n  const [journalEntries, setJournalEntries] = useState<any[]>([])\n  const [pendingTrade, setPendingTrade] = useState<any>(null)\n  const [tradeSize, setTradeSize] = useState(\"20\")\n  const [tradeLeverage, setTradeLeverage] = useState(\"8\")\n  const [tweetText, setTweetText] = useState(\"\")\n  const [isPosting, setIsPosting] = useState(false)\n  const [youtubeVideo, setYoutubeVideo] = useState(\"jfKfPfyJRdk\") // Default: Lofi beats\n  const [youtubeLabel, setYoutubeLabel] = useState(\"Lofi Trading Beats\")\n  const [newTokens, setNewTokens] = useState<any[]>([])\n  const [selectedToken, setSelectedToken] = useState<any>(null)\n  const [soundEnabled, setSoundEnabled] = useState(() => {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem('soundEnabled') === 'true'\n    }\n    return false\n  })\n  const prevTokensRef = useRef<string[]>([])\n  \n  // Play sound on new token using Web Audio API\n  const playNewTokenSound = () => {\n    if (!soundEnabled) return\n    try {\n      const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)()\n      const oscillator = audioContext.createOscillator()\n      const gainNode = audioContext.createGain()\n      \n      oscillator.connect(gainNode)\n      gainNode.connect(audioContext.destination)\n      \n      oscillator.frequency.value = 880 // A5 note\n      oscillator.type = 'sine'\n      gainNode.gain.value = 0.3\n      \n      oscillator.start()\n      oscillator.stop(audioContext.currentTime + 0.15) // Short beep\n      \n      // Second beep\n      setTimeout(() => {\n        const osc2 = audioContext.createOscillator()\n        const gain2 = audioContext.createGain()\n        osc2.connect(gain2)\n        gain2.connect(audioContext.destination)\n        osc2.frequency.value = 1100 // Higher note\n        osc2.type = 'sine'\n        gain2.gain.value = 0.3\n        osc2.start()\n        osc2.stop(audioContext.currentTime + 0.15)\n      }, 150)\n    } catch (e) {}\n  }\n  \n  // Chat state\n  const [chatMessages, setChatMessages] = useState<any[]>([])\n  const [chatInput, setChatInput] = useState(\"\")\n  const chatEndRef = useRef<HTMLDivElement>(null)\n  const [sidebarWidth, setSidebarWidth] = useState(() => {\n    if (typeof window !== 'undefined') {\n      return parseInt(localStorage.getItem('sidebarWidth') || '384')\n    }\n    return 384\n  })\n  const [isResizing, setIsResizing] = useState(false)\n  \n  // Chart height resize (percentage)\n  const [chartHeight, setChartHeight] = useState(() => {\n    if (typeof window !== 'undefined') {\n      return parseInt(localStorage.getItem('chartHeight') || '45')\n    }\n    return 45\n  })\n  const [isResizingChart, setIsResizingChart] = useState(false)\n  \n  const chartRef = useRef<HTMLDivElement>(null)\n  const pnlChartRef = useRef<HTMLCanvasElement>(null)\n  const [tvLoaded, setTvLoaded] = useState(false)\n  const [chartJsLoaded, setChartJsLoaded] = useState(false)\n\n  const ASSETS: Record<string, string> = {\n    'BTC': 'BYBIT:BTCUSDT.P',\n    'ETH': 'BYBIT:ETHUSDT.P',\n    'SOL': 'BYBIT:SOLUSDT.P',\n    'HYPE': 'MEXC:HYPEUSDT'\n  }\n\n  // Load journal from localStorage\n  useEffect(() => {\n    const saved = localStorage.getItem('tradingJournal')\n    if (saved) setJournalEntries(JSON.parse(saved))\n  }, [])\n\n  // Load chat from localStorage\n  useEffect(() => {\n    const saved = localStorage.getItem('tradingChat')\n    if (saved) setChatMessages(JSON.parse(saved))\n  }, [])\n\n  // Scroll chat to bottom\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [chatMessages])\n\n  // Resizable sidebar\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isResizing) return\n      const newWidth = window.innerWidth - e.clientX\n      if (newWidth >= 280 && newWidth <= 800) {\n        setSidebarWidth(newWidth)\n        localStorage.setItem('sidebarWidth', String(newWidth))\n      }\n    }\n    const handleMouseUp = () => setIsResizing(false)\n    \n    if (isResizing) {\n      document.addEventListener('mousemove', handleMouseMove)\n      document.addEventListener('mouseup', handleMouseUp)\n      document.body.style.cursor = 'col-resize'\n      document.body.style.userSelect = 'none'\n    }\n    \n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove)\n      document.removeEventListener('mouseup', handleMouseUp)\n      document.body.style.cursor = ''\n      document.body.style.userSelect = ''\n    }\n  }, [isResizing])\n\n  // Resizable chart height - simple pixel-based approach (lower default = taller bottom panels)\n  const [chartHeightPx, setChartHeightPx] = useState(220)\n  const leftColumnRef = useRef<HTMLDivElement>(null)\n  \n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isResizingChart) return\n      e.preventDefault()\n      \n      // Simple: chart height = mouse Y position minus header (76px) minus chart controls (36px)\n      const newHeight = e.clientY - 76 - 36\n      \n      if (newHeight >= 150 && newHeight <= 600) {\n        setChartHeightPx(newHeight)\n        localStorage.setItem('chartHeightPx', String(newHeight))\n      }\n    }\n    const handleMouseUp = () => {\n      setIsResizingChart(false)\n    }\n    \n    document.addEventListener('mousemove', handleMouseMove)\n    document.addEventListener('mouseup', handleMouseUp)\n    \n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove)\n      document.removeEventListener('mouseup', handleMouseUp)\n    }\n  }, [isResizingChart])\n  \n  // Apply cursor style when resizing\n  useEffect(() => {\n    if (isResizingChart) {\n      document.body.style.cursor = 'row-resize'\n      document.body.style.userSelect = 'none'\n    } else {\n      document.body.style.cursor = ''\n      document.body.style.userSelect = ''\n    }\n  }, [isResizingChart])\n  \n  // Load saved height\n  useEffect(() => {\n    const saved = localStorage.getItem('chartHeightPx')\n    if (saved) setChartHeightPx(parseInt(saved))\n  }, [])\n\n  // Clock\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setClock(new Date().toLocaleTimeString('en-GB', { hour12: false, timeZone: 'Europe/Oslo' }))\n    }, 1000)\n    return () => clearInterval(interval)\n  }, [])\n\n  // Funding countdown\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = new Date()\n      const utcHours = now.getUTCHours()\n      const utcMinutes = now.getUTCMinutes()\n      const utcSeconds = now.getUTCSeconds()\n      let nextFunding = Math.ceil(utcHours / 8) * 8\n      if (nextFunding >= 24) nextFunding = 0\n      let hoursLeft = nextFunding - utcHours\n      if (hoursLeft <= 0) hoursLeft += 8\n      if (utcMinutes > 0 || utcSeconds > 0) hoursLeft--\n      const minutesLeft = 59 - utcMinutes\n      const secondsLeft = 59 - utcSeconds\n      setFundingCountdown(`${hoursLeft.toString().padStart(2, '0')}:${minutesLeft.toString().padStart(2, '0')}:${secondsLeft.toString().padStart(2, '0')}`)\n    }, 1000)\n    return () => clearInterval(interval)\n  }, [])\n\n  // Initialize TradingView chart\n  useEffect(() => {\n    if (tvLoaded && chartRef.current) {\n      chartRef.current.innerHTML = ''\n      new window.TradingView.widget({\n        width: \"100%\",\n        height: \"100%\",\n        symbol: ASSETS[currentAsset],\n        interval: currentInterval,\n        timezone: \"Europe/Oslo\",\n        theme: \"dark\",\n        style: \"1\",\n        locale: \"en\",\n        toolbar_bg: \"#0c0c10\",\n        enable_publishing: false,\n        container_id: \"tv-chart\",\n        backgroundColor: \"#050508\",\n        hide_legend: true,\n        studies: [\"RSI@tv-basicstudies\"]\n      })\n    }\n  }, [tvLoaded, currentAsset, currentInterval])\n\n  // Initialize P&L Chart\n  useEffect(() => {\n    if (chartJsLoaded && pnlChartRef.current) {\n      const ctx = pnlChartRef.current.getContext('2d')\n      if (!ctx) return\n      \n      const data = [-12, 8, 15, -5, 22, 18, 25]\n      const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\n      \n      new window.Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: labels,\n          datasets: [{\n            data: data,\n            borderColor: '#00ff88',\n            backgroundColor: 'rgba(0, 255, 136, 0.1)',\n            fill: true,\n            tension: 0.4,\n            pointRadius: 2,\n            pointBackgroundColor: '#00ff88'\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: { legend: { display: false } },\n          scales: {\n            x: { \n              grid: { color: 'rgba(255,255,255,0.03)' },\n              ticks: { color: '#666', font: { size: 9 } }\n            },\n            y: { \n              grid: { color: 'rgba(255,255,255,0.03)' },\n              ticks: { \n                color: '#666', \n                font: { size: 9 },\n                callback: (v: any) => '$' + v\n              }\n            }\n          }\n        }\n      })\n    }\n  }, [chartJsLoaded])\n\n  // Fetch data\n  useEffect(() => {\n    fetchPrices()\n    fetchPortfolio()\n    fetchFearGreed()\n    fetchNews()\n    fetchNewTokens()\n    const interval = setInterval(() => {\n      fetchPrices()\n      fetchPortfolio()\n    }, 15000)\n    const tokenInterval = setInterval(fetchNewTokens, 30000) // Every 30s\n    return () => {\n      clearInterval(interval)\n      clearInterval(tokenInterval)\n    }\n  }, [wallet])\n\n  // Fetch tweets when authenticated\n  useEffect(() => {\n    if (session?.accessToken) {\n      fetchTweets()\n      const interval = setInterval(fetchTweets, 300000) // Every 5 min\n      return () => clearInterval(interval)\n    }\n  }, [session])\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) return\n      \n      switch(e.key.toLowerCase()) {\n        case '1': setCurrentAsset('BTC'); break\n        case '2': setCurrentAsset('ETH'); break\n        case '3': setCurrentAsset('SOL'); break\n        case '4': setCurrentAsset('HYPE'); break\n        case 'l': quickTrade('LONG'); break\n        case 's': quickTrade('SHORT'); break\n        case 'escape':\n          setShowJournalModal(false)\n          setShowTradeModal(false)\n          setSelectedToken(null)\n          setPendingTrade(null)\n          break\n        case 'enter':\n          if (pendingTrade) confirmTrade()\n          break\n      }\n    }\n    document.addEventListener('keydown', handler)\n    return () => document.removeEventListener('keydown', handler)\n  }, [pendingTrade])\n\n  async function fetchPrices() {\n    try {\n      // Fetch both meta (for asset names) and prices\n      const [metaRes, pricesRes] = await Promise.all([\n        fetch(\"https://api.hyperliquid.xyz/info\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ type: \"meta\" })\n        }),\n        fetch(\"https://api.hyperliquid.xyz/info\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ type: \"allMids\" })\n        })\n      ])\n      \n      const meta = await metaRes.json()\n      const mids = await pricesRes.json()\n      \n      // Map index to proper names\n      const priceMap: Record<string, string> = {}\n      const universe = meta.universe || []\n      \n      // Top coins we want to show\n      const topCoins = ['BTC', 'ETH', 'SOL', 'HYPE', 'SUI', 'AVAX', 'DOGE', 'XRP', 'ADA', 'LINK', 'DOT', 'MATIC', 'ARB', 'OP', 'APT']\n      \n      universe.forEach((asset: any, index: number) => {\n        if (topCoins.includes(asset.name) && mids[asset.name]) {\n          priceMap[asset.name] = mids[asset.name]\n        }\n      })\n      \n      // Also check direct name keys in mids\n      topCoins.forEach(coin => {\n        if (mids[coin] && !priceMap[coin]) {\n          priceMap[coin] = mids[coin]\n        }\n      })\n      \n      setPrices(priceMap)\n    } catch (e) {\n      console.error(\"Failed to fetch prices:\", e)\n    }\n  }\n\n  async function fetchPortfolio() {\n    if (!wallet) return\n    try {\n      const res = await fetch(\"https://api.hyperliquid.xyz/info\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ type: \"clearinghouseState\", user: wallet })\n      })\n      const data = await res.json()\n      setPortfolio(data)\n      setPositions(data.assetPositions || [])\n      \n      // Fetch trades\n      const tradesRes = await fetch(\"https://api.hyperliquid.xyz/info\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ type: \"userFills\", user: wallet })\n      })\n      const tradesData = await tradesRes.json()\n      setTrades(tradesData.slice(-5).reverse())\n\n      // Fetch funding rates from metaAndAssetCtxs\n      const metaRes = await fetch(\"https://api.hyperliquid.xyz/info\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ type: \"metaAndAssetCtxs\" })\n      })\n      const metaData = await metaRes.json()\n      const rates: any = {}\n      if (metaData.length >= 2) {\n        const universe = metaData[0].universe || []\n        const contexts = metaData[1] || []\n        universe.forEach((u: any, i: number) => {\n          if (i < contexts.length) {\n            // Funding is per-hour rate, multiply by 100 for percentage\n            rates[u.name] = parseFloat(contexts[i].funding || 0) * 100\n          }\n        })\n      }\n      setFundingRates(rates)\n    } catch (e) {}\n  }\n\n  async function fetchFearGreed() {\n    try {\n      const res = await fetch(\"https://api.alternative.me/fng/\")\n      const data = await res.json()\n      setFearGreed({\n        value: parseInt(data.data[0].value),\n        label: data.data[0].value_classification\n      })\n    } catch (e) {}\n  }\n\n  async function fetchNewTokens() {\n    try {\n      const res = await fetch(\"https://api.dexscreener.com/token-boosts/latest/v1\")\n      const data = await res.json()\n      // Filter to Solana tokens and get top 8\n      const tokens = (data || [])\n        .filter((t: any) => t.chainId === 'solana')\n        .slice(0, 8)\n        .map((t: any) => ({\n          address: t.tokenAddress,\n          name: t.description?.split('\\n')[0]?.slice(0, 20) || t.tokenAddress.slice(0, 6),\n          url: t.url,\n          amount: t.totalAmount || t.amount,\n          icon: t.icon ? `https://cdn.dexscreener.com/cms/${t.icon}` : null\n        }))\n      \n      // Check for new tokens and play sound\n      const newAddresses = tokens.map((t: any) => t.address)\n      const prevAddresses = prevTokensRef.current\n      if (prevAddresses.length > 0) {\n        const hasNew = newAddresses.some((addr: string) => !prevAddresses.includes(addr))\n        if (hasNew) playNewTokenSound()\n      }\n      prevTokensRef.current = newAddresses\n      \n      setNewTokens(tokens)\n    } catch (e) {\n      console.error(\"Failed to fetch new tokens:\", e)\n    }\n  }\n\n  async function fetchNews(source?: string) {\n    const src = source || newsSource\n    try {\n      let newsData: any[] = []\n      \n      if (src === \"crypto\") {\n        const res = await fetch(\"https://min-api.cryptocompare.com/data/v2/news/?lang=EN&categories=BTC,ETH,Trading\")\n        const data = await res.json()\n        newsData = (data.Data || []).slice(0, 15).map((item: any) => ({\n          id: item.id,\n          title: item.title,\n          url: item.url,\n          source: item.source_info?.name || \"Crypto\",\n          time: item.published_on * 1000\n        }))\n      } else {\n        // Use RSS2JSON for other sources\n        const rssFeeds: Record<string, string> = {\n          \"bloomberg\": \"https://feeds.bloomberg.com/markets/news.rss\",\n          \"reuters\": \"https://www.reutersagency.com/feed/?best-topics=business-finance\",\n          \"wsj\": \"https://feeds.a]content.wsj.com/rss/markets/main.xml\",\n          \"cnbc\": \"https://www.cnbc.com/id/100003114/device/rss/rss.html\",\n          \"ft\": \"https://www.ft.com/rss/home\",\n          \"cointelegraph\": \"https://cointelegraph.com/rss\",\n          \"theblock\": \"https://www.theblock.co/rss.xml\",\n          \"decrypt\": \"https://decrypt.co/feed\"\n        }\n        \n        const feedUrl = rssFeeds[src]\n        if (feedUrl) {\n          const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`)\n          const data = await res.json()\n          newsData = (data.items || []).slice(0, 15).map((item: any) => ({\n            id: item.guid || item.link,\n            title: item.title,\n            url: item.link,\n            source: data.feed?.title || src,\n            time: new Date(item.pubDate).getTime()\n          }))\n        }\n      }\n      \n      setNews(newsData)\n    } catch (e) {\n      console.error(\"News fetch error:\", e)\n    }\n  }\n\n  async function fetchTweets() {\n    try {\n      const res = await fetch(\"/api/tweets\")\n      if (res.ok) {\n        const data = await res.json()\n        setTweets(data)\n      }\n    } catch (e) {\n      console.error(\"Failed to fetch tweets:\", e)\n    }\n  }\n\n  async function postTweet() {\n    if (!tweetText.trim() || isPosting) return\n    setIsPosting(true)\n    try {\n      const res = await fetch(\"/api/tweet-direct\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ text: tweetText })\n      })\n      if (res.ok) {\n        setTweetText(\"\")\n        fetchTweets() // Refresh feed\n      } else {\n        const error = await res.json()\n        alert(error.error || \"Failed to post tweet\")\n      }\n    } catch (e) {\n      console.error(\"Failed to post tweet:\", e)\n      alert(\"Failed to post tweet\")\n    }\n    setIsPosting(false)\n  }\n\n  function quickTrade(direction: 'LONG' | 'SHORT') {\n    setPendingTrade({ direction, size: tradeSize, leverage: tradeLeverage, asset: currentAsset })\n    setShowTradeModal(true)\n  }\n\n  async function confirmTrade() {\n    if (!pendingTrade) return\n    \n    try {\n      const res = await fetch('/api/trade', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(pendingTrade)\n      })\n      \n      const data = await res.json()\n      \n      if (data.success) {\n        // Add to chat as trade log\n        const msg = {\n          id: Date.now(),\n          text: `\ud83d\udcca ${pendingTrade.direction} ${pendingTrade.asset} $${pendingTrade.size} @ ${pendingTrade.leverage}x | Price: $${data.trade.price.toLocaleString()}`,\n          time: Date.now(),\n          sender: 'system'\n        }\n        setChatMessages(prev => {\n          const updated = [...prev, msg]\n          localStorage.setItem('tradingChat', JSON.stringify(updated))\n          return updated\n        })\n        \n        setShowTradeModal(false)\n        setPendingTrade(null)\n      } else {\n        alert(`Trade failed: ${data.error}`)\n      }\n    } catch (error: any) {\n      alert(`Trade error: ${error.message}`)\n    }\n  }\n\n  function saveJournalEntry() {\n    if (!journalText.trim()) return\n    const entry = { time: Date.now(), text: journalText }\n    const updated = [...journalEntries, entry]\n    setJournalEntries(updated)\n    localStorage.setItem('tradingJournal', JSON.stringify(updated))\n    setJournalText(\"\")\n    setShowJournalModal(false)\n  }\n\n  function deleteJournalEntry(index: number) {\n    const updated = journalEntries.filter((_, i) => i !== index)\n    setJournalEntries(updated)\n    localStorage.setItem('tradingJournal', JSON.stringify(updated))\n  }\n\n  function sendChatMessage() {\n    if (!chatInput.trim()) return\n    const msg = {\n      id: Date.now(),\n      text: chatInput,\n      time: Date.now(),\n      sender: 'user'\n    }\n    const updated = [...chatMessages, msg]\n    setChatMessages(updated)\n    localStorage.setItem('tradingChat', JSON.stringify(updated))\n    setChatInput(\"\")\n  }\n\n  function clearChat() {\n    setChatMessages([])\n    localStorage.removeItem('tradingChat')\n  }\n\n  const accountValue = parseFloat(portfolio?.marginSummary?.accountValue || \"0\")\n  const btcPrice = prices.BTC ? parseFloat(prices.BTC).toLocaleString(undefined, { maximumFractionDigits: 0 }) : \"--\"\n  const ethPrice = prices.ETH ? parseFloat(prices.ETH).toLocaleString(undefined, { maximumFractionDigits: 0 }) : \"--\"\n\n  return (\n    <>\n      <Script src=\"https://s3.tradingview.com/tv.js\" onLoad={() => setTvLoaded(true)} />\n      <Script src=\"https://cdn.jsdelivr.net/npm/chart.js\" onLoad={() => setChartJsLoaded(true)} />\n      \n      <style jsx global>{`\n        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap');\n        body { font-family: 'Space Grotesk', sans-serif; }\n        .mono { font-family: 'JetBrains Mono', monospace; }\n        .glass { background: rgba(12, 12, 16, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.05); }\n        .gradient-text { background: linear-gradient(135deg, #00ff88, #00ccff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }\n        .glow-green { box-shadow: 0 0 40px rgba(0, 255, 136, 0.15); }\n        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }\n        .pulse { animation: pulse 2s infinite; }\n        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }\n        .ticker-tape { animation: scroll 40s linear infinite; }\n        ::-webkit-scrollbar { width: 4px; }\n        ::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }\n        ::-webkit-scrollbar-thumb:hover { background: #00ff88; }\n        .chart-btn { transition: all 0.2s; }\n        .chart-btn:hover { background: rgba(0, 255, 136, 0.1); border-color: rgba(0, 255, 136, 0.3); }\n        .trade-btn { transition: all 0.15s; }\n        .trade-btn:hover { transform: scale(1.02); }\n        .trade-btn:active { transform: scale(0.98); }\n        .slide-panel { box-shadow: -10px 0 40px rgba(0,0,0,0.5); }\n      `}</style>\n      \n      <div className=\"min-h-screen bg-gradient-to-b from-[#050508] to-[#0a0a12] text-white\">\n        {/* Ticker */}\n        <div className=\"bg-[#0c0c10] border-b border-white/10 overflow-hidden py-1.5\">\n          <div className=\"ticker-tape flex gap-8 whitespace-nowrap text-xs\">\n            {Object.entries(prices).slice(0, 15).concat(Object.entries(prices).slice(0, 15)).map(([sym, price], i) => (\n              <span key={`${sym}-${i}`}><span className=\"text-gray-500\">{sym}</span> <span className=\"mono text-emerald-400\">${parseFloat(price as string).toLocaleString(undefined, {maximumFractionDigits: 2})}</span></span>\n            ))}\n          </div>\n        </div>\n\n        {/* Header */}\n        <header className=\"border-b border-white/10 px-4 py-2\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-7 h-7 bg-gradient-to-br from-emerald-400 to-cyan-400 rounded-lg flex items-center justify-center font-bold text-black text-sm\">M</div>\n                <div>\n                  <div className=\"font-semibold text-sm\">MIYAMOTO TERMINAL</div>\n                  <div className=\"text-[10px] text-gray-500\">by Miyamoto Labs</div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-3 text-xs\">\n                <div><span className=\"text-gray-500\">BTC</span> <span className=\"mono text-emerald-400\">${btcPrice}</span></div>\n                <div><span className=\"text-gray-500\">ETH</span> <span className=\"mono text-emerald-400\">${ethPrice}</span></div>\n              </div>\n              \n              {/* Wallet Connect Button */}\n              <ConnectButton \n                chainStatus=\"icon\"\n                accountStatus=\"address\"\n                showBalance={false}\n              />\n              \n              {/* Sound Toggle */}\n              <button \n                onClick={() => {\n                  const newVal = !soundEnabled\n                  setSoundEnabled(newVal)\n                  localStorage.setItem('soundEnabled', String(newVal))\n                  if (newVal) {\n                    // Play test beep\n                    try {\n                      const ctx = new (window.AudioContext || (window as any).webkitAudioContext)()\n                      const osc = ctx.createOscillator()\n                      const gain = ctx.createGain()\n                      osc.connect(gain)\n                      gain.connect(ctx.destination)\n                      osc.frequency.value = 880\n                      gain.gain.value = 0.2\n                      osc.start()\n                      osc.stop(ctx.currentTime + 0.1)\n                    } catch (e) {}\n                  }\n                }}\n                className={`px-2 py-1 rounded text-xs transition ${soundEnabled ? 'bg-emerald-500/20 text-emerald-400' : 'bg-white/5 text-gray-500'}`}\n                title={soundEnabled ? 'Sound ON - Click to mute' : 'Sound OFF - Click for alerts'}\n              >\n                {soundEnabled ? '\ud83d\udd14' : '\ud83d\udd15'}\n              </button>\n              \n              <div className=\"flex items-center gap-1.5\">\n                <span className=\"w-1.5 h-1.5 bg-emerald-400 rounded-full pulse\"></span>\n                <span className=\"text-xs text-gray-400\">Live</span>\n              </div>\n              <div className=\"mono text-xs text-gray-500\">{clock}</div>\n            </div>\n          </div>\n        </header>\n\n        {/* Main */}\n        <main className=\"flex h-[calc(100vh-76px)]\">\n          {/* Left: Chart + Bottom Panels */}\n          <div ref={leftColumnRef} className=\"flex-1 flex flex-col border-r border-white/10\">\n            {/* Chart Controls */}\n            <div className=\"flex items-center justify-between px-3 py-1.5 border-b border-white/10 bg-[#0c0c10]\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex gap-1\">\n                  {['BTC', 'ETH', 'SOL', 'HYPE'].map(a => (\n                    <button key={a} onClick={() => setCurrentAsset(a)} className={`chart-btn px-2 py-0.5 text-xs rounded border ${currentAsset === a ? 'border-emerald-400 bg-emerald-400/15 text-emerald-400' : 'border-white/10'}`}>{a}</button>\n                  ))}\n                </div>\n                <div className=\"w-px h-4 bg-white/10\"></div>\n                <div className=\"flex gap-1\">\n                  {[['5', '5m'], ['15', '15m'], ['60', '1H'], ['240', '4H']].map(([v, l]) => (\n                    <button key={v} onClick={() => setCurrentInterval(v)} className={`chart-btn px-2 py-0.5 text-xs rounded border ${currentInterval === v ? 'border-emerald-400 bg-emerald-400/15 text-emerald-400' : 'border-white/10'}`}>{l}</button>\n                  ))}\n                </div>\n              </div>\n              <div className=\"flex items-center gap-3 text-xs\">\n                <span className=\"text-gray-500\">Funding: <span className={`mono ${(fundingRates.BTC || 0) >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>{(fundingRates.BTC || 0).toFixed(4)}%</span></span>\n                <span className=\"text-gray-500\">Next: <span className=\"mono text-yellow-400\">{fundingCountdown}</span></span>\n              </div>\n              <div className=\"text-xs text-gray-600\">\u2328\ufe0f L=Long S=Short Esc=Close</div>\n            </div>\n            \n            {/* Chart */}\n            <div style={{ height: chartHeightPx }} className=\"bg-[#050508] flex-shrink-0\">\n              <div id=\"tv-chart\" ref={chartRef} className=\"w-full h-full\"></div>\n            </div>\n\n            {/* Resize Handle */}\n            <div \n              className=\"h-2 bg-white/5 hover:bg-emerald-500/30 cursor-row-resize transition-colors flex items-center justify-center group\"\n              onMouseDown={(e) => { e.preventDefault(); setIsResizingChart(true) }}\n            >\n              <div className=\"w-12 h-1 bg-white/30 group-hover:bg-emerald-400 rounded transition-colors\"></div>\n            </div>\n\n            {/* Bottom Panels */}\n            <div className=\"flex-1 grid grid-cols-3 gap-px bg-white/10\">\n              {/* Trading Journal - Bottom Left */}\n              <div className=\"bg-[#0c0c10] p-3\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-xs text-gray-500\">\ud83d\udcd3 TRADING JOURNAL</span>\n                  <button onClick={() => setShowJournalModal(true)} className=\"text-xs text-emerald-400 hover:text-white\">+ Add</button>\n                </div>\n                <div className=\"space-y-2 overflow-y-auto h-[calc(100%-28px)] text-xs\">\n                  {journalEntries.length === 0 ? (\n                    <div className=\"text-gray-500\">No entries yet. Click + to add.</div>\n                  ) : (\n                    journalEntries.slice(-10).reverse().map((e, i) => (\n                      <div key={i} className=\"glass rounded p-2\">\n                        <div className=\"flex justify-between text-gray-500 mb-1\">\n                          <span>{new Date(e.time).toLocaleDateString('en-GB')}</span>\n                          <button onClick={() => deleteJournalEntry(journalEntries.length - 1 - i)} className=\"hover:text-red-400\">\u00d7</button>\n                        </div>\n                        <div className=\"text-gray-300\">{e.text}</div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </div>\n\n              {/* Fear & Greed + Quick Trade */}\n              <div className=\"bg-[#0c0c10] p-3 space-y-3\">\n                {/* Fear & Greed */}\n                <div>\n                  <div className=\"text-xs text-gray-500 mb-2\">FEAR & GREED INDEX</div>\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"text-3xl font-bold mono\">{fearGreed.value}</div>\n                    <div>\n                      <div className={`text-sm font-medium ${fearGreed.value < 25 ? 'text-red-400' : fearGreed.value < 45 ? 'text-orange-400' : fearGreed.value < 55 ? 'text-yellow-400' : fearGreed.value < 75 ? 'text-lime-400' : 'text-emerald-400'}`}>{fearGreed.label}</div>\n                      <div className=\"h-2 w-24 rounded-full mt-1 bg-gradient-to-r from-red-500 via-yellow-500 to-emerald-500 relative\">\n                        <div className=\"absolute top-0 w-1 h-2 bg-white rounded\" style={{left: `${fearGreed.value}%`}}></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Quick Trade */}\n                <div>\n                  <div className=\"text-xs text-gray-500 mb-2\">QUICK TRADE</div>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <button onClick={() => quickTrade('LONG')} className=\"trade-btn bg-emerald-400/20 hover:bg-emerald-400/30 border border-emerald-400/50 text-emerald-400 rounded-lg py-2 text-sm font-medium\">\n                      \u25b2 LONG\n                    </button>\n                    <button onClick={() => quickTrade('SHORT')} className=\"trade-btn bg-red-400/20 hover:bg-red-400/30 border border-red-400/50 text-red-400 rounded-lg py-2 text-sm font-medium\">\n                      \u25bc SHORT\n                    </button>\n                  </div>\n                  <div className=\"flex items-center gap-2 mt-2\">\n                    <input type=\"number\" value={tradeSize} onChange={(e) => setTradeSize(e.target.value)} className=\"flex-1 bg-[#050508] border border-white/10 rounded px-2 py-1 text-xs mono\" placeholder=\"Size $\" />\n                    <select value={tradeLeverage} onChange={(e) => setTradeLeverage(e.target.value)} className=\"bg-[#050508] border border-white/10 rounded px-2 py-1 text-xs\">\n                      <option value=\"5\">5x</option>\n                      <option value=\"8\">8x</option>\n                      <option value=\"10\">10x</option>\n                      <option value=\"15\">15x</option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              {/* Chat - Bottom Right */}\n              <div className=\"bg-[#0c0c10] p-3 flex flex-col\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-xs text-gray-500\">\ud83d\udcac TRADE CHAT</span>\n                  <button onClick={clearChat} className=\"text-xs text-gray-500 hover:text-red-400\">Clear</button>\n                </div>\n                <div className=\"flex-1 overflow-y-auto space-y-1.5 mb-2 min-h-[60px]\">\n                  {chatMessages.length === 0 ? (\n                    <div className=\"text-center text-gray-500 text-[10px] py-2\">Log trades & thoughts here</div>\n                  ) : chatMessages.slice(-8).map((msg) => (\n                    <div key={msg.id} className=\"glass rounded p-1.5\">\n                      <div className=\"text-[11px] text-gray-300\">{msg.text}</div>\n                      <div className=\"text-[9px] text-gray-600\">{new Date(msg.time).toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit'})}</div>\n                    </div>\n                  ))}\n                  <div ref={chatEndRef}></div>\n                </div>\n                <div className=\"flex gap-1\">\n                  <input\n                    type=\"text\"\n                    value={chatInput}\n                    onChange={(e) => setChatInput(e.target.value)}\n                    onKeyDown={(e) => e.key === 'Enter' && sendChatMessage()}\n                    placeholder=\"Type...\"\n                    className=\"flex-1 bg-[#050508] border border-white/10 rounded px-2 py-1 text-xs focus:border-emerald-500/50 focus:outline-none\"\n                  />\n                  <button onClick={sendChatMessage} disabled={!chatInput.trim()} className=\"px-2 py-1 bg-emerald-500 hover:bg-emerald-600 disabled:bg-gray-600 rounded text-xs font-medium\">\u2192</button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Right Sidebar */}\n          {/* Resize Handle */}\n          <div \n            className=\"w-1 bg-white/5 hover:bg-emerald-500/50 cursor-col-resize transition-colors\"\n            onMouseDown={() => setIsResizing(true)}\n          />\n          \n          {/* Right Sidebar - Resizable */}\n          <div style={{ width: sidebarWidth }} className=\"flex flex-col bg-[#0c0c10]\">\n            {/* Tabs */}\n            <div className=\"flex border-b border-white/10 text-xs\">\n              {['portfolio', 'twitter', 'news', 'youtube', 'swap'].map(tab => (\n                <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 px-2 py-2 font-medium border-b-2 capitalize ${activeTab === tab ? 'text-emerald-400 border-emerald-400' : 'text-gray-400 border-transparent'}`}>{tab}</button>\n              ))}\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 overflow-y-auto p-3\">\n              {activeTab === 'portfolio' && (\n                <div className=\"space-y-3\">\n                  {/* Account Value */}\n                  <div className=\"glass rounded-xl p-3 glow-green\">\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <div className=\"text-xs text-gray-500\">ACCOUNT VALUE</div>\n                      <button \n                        onClick={() => setShowWalletInput(!showWalletInput)}\n                        className=\"text-[10px] text-gray-500 hover:text-emerald-400\"\n                      >\n                        {isConnected ? `${wallet.slice(0,6)}...${wallet.slice(-4)}` : 'Set Wallet'}\n                      </button>\n                    </div>\n                    {showWalletInput && (\n                      <div className=\"flex gap-1 mb-2\">\n                        <input\n                          type=\"text\"\n                          value={walletInput}\n                          onChange={(e) => setWalletInput(e.target.value)}\n                          placeholder=\"0x...\"\n                          className=\"flex-1 bg-[#050508] border border-white/10 rounded px-2 py-1 text-xs mono\"\n                        />\n                        <button\n                          onClick={() => { if (walletInput.startsWith('0x')) { setWallet(walletInput); setShowWalletInput(false) }}}\n                          className=\"px-2 bg-emerald-500 text-black rounded text-xs\"\n                        >\n                          Load\n                        </button>\n                      </div>\n                    )}\n                    <div className=\"text-2xl font-bold mono gradient-text\">${accountValue.toFixed(2)}</div>\n                  </div>\n\n                  {/* Positions */}\n                  <div>\n                    <div className=\"text-xs text-gray-500 mb-1\">POSITIONS</div>\n                    {positions.length > 0 ? positions.map((pos: any) => {\n                      const p = pos.position\n                      const size = parseFloat(p.szi)\n                      const pnl = parseFloat(p.unrealizedPnl || 0)\n                      return (\n                        <div key={p.coin} className=\"glass rounded px-2 py-1.5 flex justify-between text-xs mb-1\">\n                          <span className=\"font-medium\">{p.coin} <span className={size > 0 ? 'text-emerald-400' : 'text-red-400'}>{size > 0 ? 'LONG' : 'SHORT'}</span></span>\n                          <span className={`mono ${pnl >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>${pnl.toFixed(2)}</span>\n                        </div>\n                      )\n                    }) : <div className=\"text-gray-500 text-xs\">No positions</div>}\n                  </div>\n\n                  {/* Bots */}\n                  <div>\n                    <div className=\"text-xs text-gray-500 mb-1\">BOTS</div>\n                    <div className=\"space-y-1\">\n                      <div className=\"flex items-center justify-between glass rounded px-2 py-1.5 text-xs\">\n                        <span>HL V2.1</span>\n                        <span className=\"flex items-center gap-1\"><span className=\"w-1.5 h-1.5 bg-emerald-400 rounded-full pulse\"></span><span className=\"text-emerald-400\">Live</span></span>\n                      </div>\n                      <div className=\"flex items-center justify-between glass rounded px-2 py-1.5 text-xs\">\n                        <span>Polymarket</span>\n                        <span className=\"flex items-center gap-1\"><span className=\"w-1.5 h-1.5 bg-yellow-500 rounded-full pulse\"></span><span className=\"text-yellow-500\">Paper</span></span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Recent Trades */}\n                  <div>\n                    <div className=\"text-xs text-gray-500 mb-1\">RECENT TRADES</div>\n                    <div className=\"space-y-0.5 text-xs\">\n                      {trades.map((f: any, i: number) => (\n                        <div key={i} className=\"flex justify-between py-0.5\">\n                          <span className={f.side === 'B' ? 'text-emerald-400' : 'text-red-400'}>{f.side === 'B' ? 'BUY' : 'SELL'} {f.coin}</span>\n                          <span className=\"mono text-gray-400\">{parseFloat(f.sz).toFixed(4)}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Funding Rates */}\n                  <div>\n                    <div className=\"text-xs text-gray-500 mb-1\">FUNDING RATES</div>\n                    <div className=\"grid grid-cols-5 gap-1\">\n                      {['BTC', 'ETH', 'SOL', 'HYPE', 'DOGE', 'ARB', 'OP', 'AVAX', 'LINK', 'SUI'].map(sym => {\n                        const rate = fundingRates[sym] || 0\n                        return (\n                          <div key={sym} className={`rounded p-1 text-center ${rate > 0.01 ? 'bg-emerald-900/30' : rate < -0.01 ? 'bg-red-900/30' : 'bg-white/5'}`}>\n                            <div className=\"text-[10px] text-gray-500\">{sym}</div>\n                            <div className={`mono text-[10px] ${rate > 0 ? 'text-emerald-400' : rate < 0 ? 'text-red-400' : 'text-gray-500'}`}>{rate.toFixed(3)}%</div>\n                          </div>\n                        )\n                      })}\n                    </div>\n                  </div>\n\n                  {/* Whale Alerts */}\n                  <div>\n                    <div className=\"text-xs text-gray-500 mb-1\">\ud83d\udc0b WHALE ALERTS</div>\n                    <div className=\"text-xs text-gray-500\">Monitoring for trades &gt;$100k...</div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'twitter' && (\n                <div className=\"space-y-2\">\n                  {/* Tweet Composer - Always visible, uses OAuth 1.0a */}\n                  <div className=\"glass rounded-lg p-3 mb-3\">\n                    <div className=\"text-xs text-emerald-400 mb-2\">\u2713 Posting as @miyamotolabs</div>\n                    <textarea\n                      value={tweetText}\n                      onChange={(e) => setTweetText(e.target.value)}\n                      placeholder=\"What's happening?\"\n                      className=\"w-full bg-transparent border-none resize-none text-sm focus:outline-none\"\n                      rows={3}\n                      maxLength={280}\n                    />\n                    <div className=\"flex items-center justify-between mt-2\">\n                      <span className={`text-xs ${tweetText.length > 260 ? 'text-orange-400' : 'text-gray-500'}`}>\n                        {tweetText.length}/280\n                      </span>\n                      <button\n                        onClick={postTweet}\n                        disabled={!tweetText.trim() || isPosting}\n                        className=\"px-3 py-1 bg-sky-500 hover:bg-sky-600 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-full text-xs font-medium\"\n                      >\n                        {isPosting ? \"Posting...\" : \"Post\"}\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Feed - uses bird CLI, no OAuth needed */}\n                  {tweets.length > 0 ? tweets.slice(0, 15).map((tweet: any) => (\n                    <a key={tweet.id} href={`https://x.com/${tweet.author?.username}/status/${tweet.id}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block glass rounded-lg p-2 hover:bg-white/5 transition\">\n                      <div className=\"flex items-start gap-2\">\n                        <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-400 flex items-center justify-center text-black text-xs font-bold\">\n                          {tweet.author?.name?.charAt(0)?.toUpperCase() || '?'}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-1 text-xs\">\n                            <span className=\"font-medium truncate\">{tweet.author?.name || 'Unknown'}</span>\n                            <span className=\"text-gray-500\">@{tweet.author?.username || 'unknown'}</span>\n                            <span className=\"text-gray-600\">\u00b7</span>\n                            <span className=\"text-gray-500\">{tweet.createdAt ? new Date(tweet.createdAt).toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit'}) : ''}</span>\n                          </div>\n                          <div className=\"text-xs text-gray-300 mt-1 line-clamp-3\">{tweet.text}</div>\n                          <div className=\"flex gap-4 mt-2 text-[10px] text-gray-500\">\n                            <span>\u2665 {tweet.likeCount || 0}</span>\n                            <span>\u21bb {tweet.retweetCount || 0}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </a>\n                  )) : <div className=\"text-gray-500 text-xs\">Loading tweets...</div>}\n                </div>\n              )}\n\n              {activeTab === 'news' && (\n                <div className=\"space-y-3\">\n                  {/* News Source Dropdown */}\n                  <select \n                    className=\"w-full bg-[#0c0c10] border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-emerald-500/50 focus:outline-none cursor-pointer\"\n                    value={newsSource}\n                    onChange={(e) => {\n                      setNewsSource(e.target.value)\n                      fetchNews(e.target.value)\n                    }}\n                  >\n                    <optgroup label=\"\u20bf Crypto\">\n                      <option value=\"crypto\">CryptoCompare</option>\n                      <option value=\"cointelegraph\">Cointelegraph</option>\n                      <option value=\"theblock\">The Block</option>\n                      <option value=\"decrypt\">Decrypt</option>\n                    </optgroup>\n                    <optgroup label=\"\ud83d\udcf0 Finance\">\n                      <option value=\"bloomberg\">Bloomberg</option>\n                      <option value=\"reuters\">Reuters</option>\n                      <option value=\"wsj\">Wall Street Journal</option>\n                      <option value=\"cnbc\">CNBC</option>\n                      <option value=\"ft\">Financial Times</option>\n                    </optgroup>\n                  </select>\n                  \n                  {/* Quick Source Buttons */}\n                  <div className=\"grid grid-cols-4 gap-1\">\n                    <button onClick={() => { setNewsSource(\"crypto\"); fetchNews(\"crypto\") }} className={`glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10 ${newsSource === \"crypto\" ? \"border border-emerald-500/50\" : \"\"}`}>Crypto</button>\n                    <button onClick={() => { setNewsSource(\"bloomberg\"); fetchNews(\"bloomberg\") }} className={`glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10 ${newsSource === \"bloomberg\" ? \"border border-emerald-500/50\" : \"\"}`}>Bloomberg</button>\n                    <button onClick={() => { setNewsSource(\"reuters\"); fetchNews(\"reuters\") }} className={`glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10 ${newsSource === \"reuters\" ? \"border border-emerald-500/50\" : \"\"}`}>Reuters</button>\n                    <button onClick={() => { setNewsSource(\"cointelegraph\"); fetchNews(\"cointelegraph\") }} className={`glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10 ${newsSource === \"cointelegraph\" ? \"border border-emerald-500/50\" : \"\"}`}>CT</button>\n                  </div>\n                  \n                  {/* News List */}\n                  <div className=\"space-y-2 max-h-[400px] overflow-y-auto\">\n                    {news.length === 0 ? (\n                      <div className=\"text-xs text-gray-500 text-center py-4\">Loading...</div>\n                    ) : news.map((item: any) => (\n                      <a key={item.id} href={item.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block rounded p-2 hover:bg-white/5 transition\">\n                        <div className=\"text-xs font-medium line-clamp-2\">{item.title}</div>\n                        <div className=\"text-xs text-gray-500 mt-1\">{item.source} \u2022 {new Date(item.time).toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit'})}</div>\n                      </a>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* YouTube - Always mounted to keep audio playing */}\n              <div className={`space-y-3 ${activeTab === 'youtube' ? '' : 'hidden'}`}>\n                  {/* Channel Dropdown */}\n                  <select \n                    className=\"w-full bg-[#0c0c10] border border-white/10 rounded-lg px-3 py-2 text-sm focus:border-emerald-500/50 focus:outline-none cursor-pointer\"\n                    value={youtubeVideo}\n                    onChange={(e) => {\n                      const selected = e.target.selectedOptions[0]\n                      setYoutubeVideo(e.target.value)\n                      setYoutubeLabel(selected.text)\n                    }}\n                  >\n                    <optgroup label=\"\ud83d\udcfa Live News\">\n                      <option value=\"dp8PhLsUcFE\">Bloomberg TV Live</option>\n                      <option value=\"9Auq9mYxFEE\">CNBC Live</option>\n                      <option value=\"Nq7LnaqSPpc\">Yahoo Finance Live</option>\n                    </optgroup>\n                    <optgroup label=\"\ud83c\udfdb\ufe0f Official\">\n                      <option value=\"V7lVPAv8Zw0\">White House</option>\n                      <option value=\"TBQMnQpjPzo\">Federal Reserve</option>\n                    </optgroup>\n                    <optgroup label=\"\u20bf Crypto\">\n                      <option value=\"rUcFXFd0rik\">Crypto Banter</option>\n                      <option value=\"86g7n0HvcdI\">BTC Live Chart</option>\n                      <option value=\"Dc-knZfwCfk\">Coin Bureau</option>\n                      <option value=\"eFLPRicLrxE\">Ben Cowen</option>\n                      <option value=\"KrPVfXUGYgo\">Ivan on Tech</option>\n                      <option value=\"VZxNvCKq5XA\">Crypto Anup</option>\n                    </optgroup>\n                    <optgroup label=\"\ud83c\udfb5 Music\">\n                      <option value=\"jfKfPfyJRdk\">Lofi Trading Beats</option>\n                      <option value=\"4xDzrJKXOOY\">Synthwave Radio</option>\n                      <option value=\"5qap5aO4i9A\">Chill Beats</option>\n                      <option value=\"36YnV9STBqc\">Jazz Radio</option>\n                    </optgroup>\n                  </select>\n                  \n                  {/* Embedded Player - starts muted, click to unmute */}\n                  <div className=\"aspect-video rounded-lg overflow-hidden bg-black\">\n                    <iframe \n                      key={youtubeVideo}\n                      src={`https://www.youtube.com/embed/${youtubeVideo}?autoplay=1&mute=0`}\n                      className=\"w-full h-full\"\n                      allow=\"autoplay; encrypted-media\"\n                      allowFullScreen\n                    />\n                  </div>\n                  <div className=\"text-xs text-gray-500 text-center\">{youtubeLabel} (click video to unmute)</div>\n                  \n                  {/* Quick Access Buttons */}\n                  <div className=\"grid grid-cols-4 gap-1\">\n                    <button onClick={() => { setYoutubeVideo(\"dp8PhLsUcFE\"); setYoutubeLabel(\"Bloomberg\") }} className=\"glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10\">Bloomberg</button>\n                    <button onClick={() => { setYoutubeVideo(\"rUcFXFd0rik\"); setYoutubeLabel(\"Banter\") }} className=\"glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10\">Banter</button>\n                    <button onClick={() => { setYoutubeVideo(\"jfKfPfyJRdk\"); setYoutubeLabel(\"Lofi\") }} className=\"glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10\">Lofi</button>\n                    <button onClick={() => { setYoutubeVideo(\"V7lVPAv8Zw0\"); setYoutubeLabel(\"White House\") }} className=\"glass rounded px-1 py-1 text-[10px] text-center hover:bg-white/10\">\ud83c\udfdb\ufe0f WH</button>\n                  </div>\n                </div>\n\n              {activeTab === 'swap' && (\n                <div className=\"h-full flex flex-col\">\n                  <div className=\"flex-1 rounded-lg overflow-hidden bg-[#050508]\">\n                    <iframe \n                      src=\"https://liqd.ag/widget?theme=dark\"\n                      className=\"w-full h-full min-h-[400px]\"\n                      allow=\"clipboard-write\"\n                      style={{ border: 'none' }}\n                    />\n                  </div>\n                  <div className=\"mt-3 space-y-2\">\n                    <a \n                      href=\"https://liqd.ag\" \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"block w-full py-2 bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-400 hover:to-cyan-400 text-black font-bold rounded-lg text-center text-sm transition\"\n                    >\n                      Open liqd.ag \u2197\n                    </a>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <a href=\"https://app.hyperliquid.xyz/trade\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-center text-xs\">Hyperliquid</a>\n                      <a href=\"https://app.1inch.io\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-center text-xs\">1inch</a>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </main>\n\n        {/* Journal Modal */}\n        {showJournalModal && (\n          <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50\">\n            <div className=\"glass rounded-xl p-4 w-80\">\n              <div className=\"text-sm font-medium mb-3\">Add Journal Entry</div>\n              <textarea value={journalText} onChange={(e) => setJournalText(e.target.value)} className=\"w-full bg-[#050508] border border-white/10 rounded p-2 text-sm h-24 resize-none focus:border-emerald-500/50 focus:outline-none\" placeholder=\"What's your trade thesis?\"></textarea>\n              <div className=\"flex gap-2 mt-3\">\n                <button onClick={saveJournalEntry} className=\"flex-1 bg-emerald-400 text-black rounded py-1.5 text-sm font-medium hover:bg-emerald-500\">Save</button>\n                <button onClick={() => setShowJournalModal(false)} className=\"flex-1 bg-white/10 rounded py-1.5 text-sm hover:bg-white/20\">Cancel</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Trade Modal */}\n        {showTradeModal && pendingTrade && (\n          <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50\">\n            <div className=\"glass rounded-xl p-4 w-72\">\n              <div className=\"text-sm font-medium mb-3\">Confirm {pendingTrade.direction}</div>\n              <div className=\"text-xs space-y-1 mb-3\">\n                <div className=\"flex justify-between\"><span className=\"text-gray-400\">Asset:</span><span>{pendingTrade.asset}</span></div>\n                <div className=\"flex justify-between\"><span className=\"text-gray-400\">Size:</span><span>${pendingTrade.size}</span></div>\n                <div className=\"flex justify-between\"><span className=\"text-gray-400\">Leverage:</span><span>{pendingTrade.leverage}x</span></div>\n                <div className=\"flex justify-between\"><span className=\"text-gray-400\">Direction:</span><span className={pendingTrade.direction === 'LONG' ? 'text-emerald-400' : 'text-red-400'}>{pendingTrade.direction}</span></div>\n              </div>\n              <div className=\"flex gap-2\">\n                <button onClick={confirmTrade} className={`flex-1 rounded py-1.5 text-sm font-medium ${pendingTrade.direction === 'LONG' ? 'bg-emerald-400 text-black hover:bg-emerald-500' : 'bg-red-500 text-white hover:bg-red-600'}`}>Confirm</button>\n                <button onClick={() => { setShowTradeModal(false); setPendingTrade(null); }} className=\"flex-1 bg-white/10 rounded py-1.5 text-sm hover:bg-white/20\">Cancel</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n      </div>\n    </>\n  )\n}\n",
    "app/globals.css": "@import \"tailwindcss\";\n\n:root {\n  --background: #ffffff;\n  --foreground: #171717;\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --background: #0a0a0a;\n    --foreground: #ededed;\n  }\n}\n\nbody {\n  background: var(--background);\n  color: var(--foreground);\n  font-family: Arial, Helvetica, sans-serif;\n}\n",
    "app/providers.tsx": "\"use client\"\n\nimport { SessionProvider } from \"next-auth/react\"\nimport { WalletProviders } from \"./wallet-provider\"\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return (\n    <SessionProvider>\n      <WalletProviders>\n        {children}\n      </WalletProviders>\n    </SessionProvider>\n  )\n}\n",
    "app/auth/error/page.tsx": "\"use client\"\n\nimport { useSearchParams } from \"next/navigation\"\nimport { useEffect, useState, Suspense } from \"react\"\n\nfunction ErrorContent() {\n  const searchParams = useSearchParams()\n  const [error, setError] = useState<string>(\"\")\n\n  useEffect(() => {\n    const errorParam = searchParams.get(\"error\")\n    setError(errorParam || \"Unknown error\")\n  }, [searchParams])\n\n  const errorMessages: Record<string, string> = {\n    Configuration: \"There is a problem with the server configuration.\",\n    AccessDenied: \"You denied access to your Twitter account.\",\n    Verification: \"The verification token has expired or has already been used.\",\n    OAuthSignin: \"Error in constructing an authorization URL.\",\n    OAuthCallback: \"Error in handling the response from Twitter.\",\n    OAuthCreateAccount: \"Could not create OAuth account.\",\n    EmailCreateAccount: \"Could not create email account.\",\n    Callback: \"Error in the OAuth callback handler route.\",\n    OAuthAccountNotLinked: \"Email on the account is already linked to another account.\",\n    SessionRequired: \"Please sign in to access this page.\",\n    RefreshAccessTokenError: \"Failed to refresh the access token. Please sign in again.\",\n    Default: \"An error occurred during authentication.\"\n  }\n\n  return (\n    <div className=\"max-w-md w-full glass rounded-xl p-8 text-center\">\n      <div className=\"w-16 h-16 bg-red-500/20 border border-red-500/50 rounded-full flex items-center justify-center mx-auto mb-4\">\n        <svg className=\"w-8 h-8 text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n        </svg>\n      </div>\n      \n      <h1 className=\"text-2xl font-bold mb-2\">Authentication Error</h1>\n      <p className=\"text-gray-400 mb-6\">\n        {errorMessages[error] || errorMessages.Default}\n      </p>\n      \n      <div className=\"bg-[#050508] border border-white/10 rounded-lg p-3 mb-6\">\n        <p className=\"text-xs text-gray-500 mb-1\">Error Code:</p>\n        <p className=\"text-sm mono text-red-400\">{error}</p>\n      </div>\n\n      <div className=\"space-y-3\">\n        <a\n          href=\"/\"\n          className=\"block w-full bg-emerald-500 hover:bg-emerald-600 text-white font-medium py-2 px-4 rounded-lg transition\"\n        >\n          Return to Dashboard\n        </a>\n        \n        {error === \"RefreshAccessTokenError\" && (\n          <button\n            onClick={() => window.location.href = \"/api/auth/signin/twitter\"}\n            className=\"block w-full bg-sky-500 hover:bg-sky-600 text-white font-medium py-2 px-4 rounded-lg transition\"\n          >\n            Sign In Again\n          </button>\n        )}\n      </div>\n\n      <div className=\"mt-6 text-xs text-gray-500\">\n        <p>If this problem persists, please check:</p>\n        <ul className=\"mt-2 space-y-1 text-left\">\n          <li>\u2022 Twitter API credentials are correct</li>\n          <li>\u2022 Callback URL is properly configured</li>\n          <li>\u2022 App has the required scopes enabled</li>\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default function AuthErrorPage() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-[#050508] to-[#0a0a12] text-white flex items-center justify-center p-4\">\n      <Suspense fallback={\n        <div className=\"max-w-md w-full glass rounded-xl p-8 text-center\">\n          <div className=\"text-gray-400\">Loading error details...</div>\n        </div>\n      }>\n        <ErrorContent />\n      </Suspense>\n\n      <style jsx global>{`\n        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@400;500;600;700&display=swap');\n        body { font-family: 'Space Grotesk', sans-serif; }\n        .mono { font-family: 'JetBrains Mono', monospace; }\n        .glass { background: rgba(12, 12, 16, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.05); }\n      `}</style>\n    </div>\n  )\n}\n",
    "app/api/tweet/route.ts": "import { auth } from \"@/auth\"\nimport { NextResponse } from \"next/server\"\n\nexport async function POST(request: Request) {\n  const session = await auth()\n  \n  if (!session?.accessToken) {\n    return NextResponse.json({ \n      error: \"Not authenticated\",\n      hint: \"Please sign in with Twitter to post tweets\"\n    }, { status: 401 })\n  }\n\n  // Check for token refresh error\n  if (session.error === \"RefreshAccessTokenError\") {\n    return NextResponse.json({ \n      error: \"Token expired\",\n      hint: \"Please sign in again to refresh your session\"\n    }, { status: 401 })\n  }\n  \n  try {\n    const { text } = await request.json()\n    \n    if (!text || text.length === 0) {\n      return NextResponse.json({ error: \"Tweet text is required\" }, { status: 400 })\n    }\n    \n    if (text.length > 280) {\n      return NextResponse.json({ error: \"Tweet exceeds 280 characters\" }, { status: 400 })\n    }\n    \n    console.log(\"Posting tweet with OAuth 2.0...\")\n    \n    const response = await fetch(\"https://api.twitter.com/2/tweets\", {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${session.accessToken}`,\n        \"Content-Type\": \"application/json\",\n        \"User-Agent\": \"TradingTerminal/1.0\"\n      },\n      body: JSON.stringify({ text })\n    })\n    \n    const responseData = await response.json()\n    \n    if (!response.ok) {\n      console.error(\"Twitter API error:\", responseData)\n      \n      // Check for common OAuth 2.0 scope issues\n      if (response.status === 403 && responseData.detail?.includes(\"scope\")) {\n        return NextResponse.json({ \n          error: \"Missing required scopes\",\n          hint: \"Please sign out and sign in again to grant tweet.write permission\",\n          details: responseData,\n          fallback: \"You can use the direct posting method as an alternative\"\n        }, { status: 403 })\n      }\n      \n      return NextResponse.json({ \n        error: responseData.detail || responseData.title || \"Failed to post tweet\",\n        details: responseData,\n        fallback: \"Try using /api/tweet-direct endpoint instead\"\n      }, { status: response.status })\n    }\n    \n    return NextResponse.json({ success: true, tweet: responseData.data })\n    \n  } catch (error) {\n    console.error(\"Error posting tweet:\", error)\n    return NextResponse.json({ \n      error: \"Internal server error\",\n      details: error instanceof Error ? error.message : String(error)\n    }, { status: 500 })\n  }\n}\n",
    "app/api/auth/[...nextauth]/route.ts": "import { handlers } from \"@/auth\"\nexport const { GET, POST } = handlers\n",
    "app/api/trade/route.ts": "import { NextRequest, NextResponse } from \"next/server\"\n\n// Hyperliquid API for trading\nconst HL_API = \"https://api.hyperliquid.xyz\"\n\n// These would normally be in env vars - for now hardcoded for testing\nconst WALLET = \"0xF1CcD889c2b340636A567DfF3f1d157f7FFD00dB\"\nconst PRIVATE_KEY = process.env.HL_PRIVATE_KEY || \"\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n    const { direction, asset, size, leverage } = body\n    \n    if (!direction || !asset || !size) {\n      return NextResponse.json({ error: \"Missing parameters\" }, { status: 400 })\n    }\n    \n    // For now, return a mock success since we need the private key server-side\n    // In production, this would use the Hyperliquid SDK\n    \n    // Get current price\n    const priceRes = await fetch(`${HL_API}/info`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ type: \"allMids\" })\n    })\n    const prices = await priceRes.json()\n    const currentPrice = parseFloat(prices[asset] || \"0\")\n    \n    if (!currentPrice) {\n      return NextResponse.json({ error: \"Could not get price\" }, { status: 500 })\n    }\n    \n    // Calculate position size\n    const sizeInAsset = parseFloat(size) / currentPrice\n    \n    // Log the trade intent (in production, this would execute via SDK)\n    console.log(`[TRADE] ${direction} ${asset}: $${size} (${sizeInAsset.toFixed(6)} ${asset}) @ ${leverage}x`)\n    console.log(`[TRADE] Price: $${currentPrice}`)\n    \n    // For actual execution, we'd need:\n    // 1. Private key in env vars\n    // 2. Hyperliquid SDK or signing logic\n    // 3. Order submission\n    \n    // Return success with trade details\n    return NextResponse.json({\n      success: true,\n      trade: {\n        direction,\n        asset,\n        size: parseFloat(size),\n        sizeInAsset: sizeInAsset.toFixed(6),\n        leverage: parseInt(leverage),\n        price: currentPrice,\n        timestamp: Date.now()\n      },\n      message: `${direction} order logged. Execution requires bot integration.`\n    })\n    \n  } catch (error: any) {\n    console.error(\"Trade error:\", error)\n    return NextResponse.json({ error: error.message }, { status: 500 })\n  }\n}\n",
    "app/api/tweets/route.ts": "import { NextResponse } from \"next/server\"\n\n// Bearer token for app-only auth (search/read)\nconst BEARER_TOKEN = \"AAAAAAAAAAAAAAAAAAAAAMWH7QEAAAAAj9hs7gEWOFr9gV3xkQhXb37VyYg%3DwkXxm6KSCiY1Z1H3Iu7E36L3vVJqPvTzFmkysHYfkQorcrcSl4\"\n\nexport async function GET() {\n  try {\n    // Search for crypto tweets from popular accounts\n    const url = \"https://api.twitter.com/2/tweets/search/recent\"\n    const params = new URLSearchParams({\n      query: \"(crypto OR bitcoin OR ethereum OR trading) -is:retweet lang:en\",\n      max_results: \"15\",\n      \"tweet.fields\": \"created_at,public_metrics,author_id\",\n      \"expansions\": \"author_id\",\n      \"user.fields\": \"name,username,profile_image_url\"\n    })\n    \n    const response = await fetch(`${url}?${params}`, {\n      headers: {\n        \"Authorization\": `Bearer ${BEARER_TOKEN}`,\n        \"User-Agent\": \"TradingTerminal/1.0\"\n      },\n      next: { revalidate: 60 } // Cache for 60 seconds\n    })\n    \n    if (!response.ok) {\n      const error = await response.text()\n      console.error(\"Twitter search error:\", response.status, error)\n      // Return mock data as fallback\n      return NextResponse.json(getMockTweets())\n    }\n\n    const data = await response.json()\n    \n    // Map tweets with author info\n    const users = data.includes?.users || []\n    const tweets = (data.data || []).map((tweet: any) => {\n      const author = users.find((u: any) => u.id === tweet.author_id) || {}\n      return {\n        id: tweet.id,\n        text: tweet.text,\n        createdAt: tweet.created_at,\n        likeCount: tweet.public_metrics?.like_count || 0,\n        retweetCount: tweet.public_metrics?.retweet_count || 0,\n        author: {\n          name: author.name || \"Crypto Trader\",\n          username: author.username || \"trader\",\n          avatar: author.profile_image_url\n        }\n      }\n    })\n    \n    return NextResponse.json(tweets.length > 0 ? tweets : getMockTweets())\n  } catch (error: any) {\n    console.error(\"Error fetching tweets:\", error.message)\n    return NextResponse.json(getMockTweets())\n  }\n}\n\nfunction getMockTweets() {\n  return [\n    {\n      id: \"1\",\n      text: \"BTC looking strong above $69k. Key resistance at $70k - break that and we're looking at new ATH territory. \ud83d\udcc8\",\n      createdAt: new Date().toISOString(),\n      likeCount: 245,\n      retweetCount: 42,\n      author: { name: \"Crypto Analyst\", username: \"cryptoanalyst\", avatar: null }\n    },\n    {\n      id: \"2\", \n      text: \"ETH gas fees finally reasonable. Time to deploy some contracts. DeFi summer 2.0 loading... \ud83d\udd25\",\n      createdAt: new Date(Date.now() - 3600000).toISOString(),\n      likeCount: 189,\n      retweetCount: 31,\n      author: { name: \"DeFi Degen\", username: \"defidegen\", avatar: null }\n    },\n    {\n      id: \"3\",\n      text: \"Funding rates negative across the board. Shorts getting crowded. You know what that means... \ud83d\ude80\",\n      createdAt: new Date(Date.now() - 7200000).toISOString(),\n      likeCount: 312,\n      retweetCount: 67,\n      author: { name: \"Trading Pro\", username: \"tradingpro\", avatar: null }\n    }\n  ]\n}\n",
    "app/api/tweet-direct/route.ts": "import { NextResponse } from \"next/server\"\nimport crypto from \"crypto\"\n\n// OAuth 1.0a credentials - from env vars or fallback to hardcoded (for localhost)\nconst TWITTER_API_KEY = process.env.TWITTER_API_KEY || \"8y9S9LjBOHNmXEH0eduHJLckk\"\nconst TWITTER_API_SECRET = process.env.TWITTER_API_SECRET || \"vtI12K6SPi2K3qjsVu4owbaTtlxTDabf5BmE1aUl2Crp73tUhm\"\nconst TWITTER_ACCESS_TOKEN = process.env.TWITTER_ACCESS_TOKEN || \"2018603165633912832-5DVjB4g0yI8uQT0TcRhgHRP9uNhGbn\"\nconst TWITTER_ACCESS_TOKEN_SECRET = process.env.TWITTER_ACCESS_SECRET || \"wnJvQy3OI9TH4qGyikFzLbrb8ETky1DIjI5UDoK4Gohmo\"\n\nfunction percentEncode(str: string): string {\n  return encodeURIComponent(str)\n    .replace(/!/g, \"%21\")\n    .replace(/\\*/g, \"%2A\")\n    .replace(/'/g, \"%27\")\n    .replace(/\\(/g, \"%28\")\n    .replace(/\\)/g, \"%29\")\n}\n\nfunction generateOAuth1Signature(\n  method: string,\n  url: string,\n  params: Record<string, string>\n): string {\n  // Sort parameters\n  const sortedParams = Object.keys(params)\n    .sort()\n    .map(key => `${percentEncode(key)}=${percentEncode(params[key])}`)\n    .join(\"&\")\n\n  // Create signature base string\n  const signatureBase = [\n    method.toUpperCase(),\n    percentEncode(url),\n    percentEncode(sortedParams)\n  ].join(\"&\")\n\n  // Create signing key\n  const signingKey = `${percentEncode(TWITTER_API_SECRET)}&${percentEncode(TWITTER_ACCESS_TOKEN_SECRET)}`\n\n  // Generate signature\n  const signature = crypto\n    .createHmac(\"sha1\", signingKey)\n    .update(signatureBase)\n    .digest(\"base64\")\n\n  return signature\n}\n\nfunction generateOAuth1Header(method: string, url: string, additionalParams: Record<string, string> = {}): string {\n  const oauthParams: Record<string, string> = {\n    oauth_consumer_key: TWITTER_API_KEY,\n    oauth_token: TWITTER_ACCESS_TOKEN,\n    oauth_signature_method: \"HMAC-SHA1\",\n    oauth_timestamp: Math.floor(Date.now() / 1000).toString(),\n    oauth_nonce: crypto.randomBytes(32).toString(\"base64\").replace(/\\W/g, \"\"),\n    oauth_version: \"1.0\"\n  }\n\n  // Merge with any additional params for signature\n  const allParams = { ...oauthParams, ...additionalParams }\n\n  // Generate signature\n  const signature = generateOAuth1Signature(method, url, allParams)\n  oauthParams.oauth_signature = signature\n\n  // Build header\n  const headerParts = Object.keys(oauthParams)\n    .sort()\n    .map(key => `${percentEncode(key)}=\"${percentEncode(oauthParams[key])}\"`)\n    .join(\", \")\n\n  return `OAuth ${headerParts}`\n}\n\nexport async function POST(request: Request) {\n  try {\n    const { text } = await request.json()\n    \n    if (!text || text.length === 0) {\n      return NextResponse.json({ error: \"Tweet text is required\" }, { status: 400 })\n    }\n    \n    if (text.length > 280) {\n      return NextResponse.json({ error: \"Tweet exceeds 280 characters\" }, { status: 400 })\n    }\n\n    const url = \"https://api.twitter.com/2/tweets\"\n    const body = JSON.stringify({ text })\n\n    // For POST with JSON body, we don't include body params in signature\n    const authHeader = generateOAuth1Header(\"POST\", url)\n\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": authHeader,\n        \"Content-Type\": \"application/json\",\n        \"User-Agent\": \"TradingTerminal/1.0\"\n      },\n      body: body\n    })\n    \n    const responseData = await response.json()\n\n    if (!response.ok) {\n      console.error(\"Twitter API error:\", responseData)\n      return NextResponse.json({ \n        error: responseData.detail || responseData.title || \"Failed to post tweet\",\n        details: responseData\n      }, { status: response.status })\n    }\n    \n    return NextResponse.json({ success: true, tweet: responseData.data })\n    \n  } catch (error) {\n    console.error(\"Error posting tweet:\", error)\n    return NextResponse.json({ \n      error: \"Internal server error\",\n      details: error instanceof Error ? error.message : String(error)\n    }, { status: 500 })\n  }\n}\n",
    "package.json": "{\n  \"name\": \"trading-terminal\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\"\n  },\n  \"dependencies\": {\n    \"@rainbow-me/rainbowkit\": \"^2.2.10\",\n    \"@solana/wallet-adapter-base\": \"^0.9.27\",\n    \"@solana/wallet-adapter-react\": \"^0.15.39\",\n    \"@solana/wallet-adapter-react-ui\": \"^0.9.39\",\n    \"@solana/web3.js\": \"^1.98.4\",\n    \"@tanstack/react-query\": \"^5.90.20\",\n    \"next\": \"16.1.6\",\n    \"next-auth\": \"^5.0.0-beta.30\",\n    \"react\": \"19.2.3\",\n    \"react-dom\": \"19.2.3\",\n    \"viem\": \"^2.45.1\",\n    \"wagmi\": \"^3.4.2\"\n  },\n  \"devDependencies\": {\n    \"@tailwindcss/postcss\": \"^4\",\n    \"@types/node\": \"^20\",\n    \"@types/react\": \"^19\",\n    \"@types/react-dom\": \"^19\",\n    \"tailwindcss\": \"^4\",\n    \"typescript\": \"^5\"\n  }\n}\n",
    "next.config.ts": "import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  /* config options here */\n};\n\nexport default nextConfig;\n",
    "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2017\",\n    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n    \"allowJs\": true,\n    \"skipLibCheck\": true,\n    \"strict\": true,\n    \"noEmit\": true,\n    \"esModuleInterop\": true,\n    \"module\": \"esnext\",\n    \"moduleResolution\": \"bundler\",\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"jsx\": \"react-jsx\",\n    \"incremental\": true,\n    \"plugins\": [\n      {\n        \"name\": \"next\"\n      }\n    ],\n    \"paths\": {\n      \"@/*\": [\"./*\"]\n    }\n  },\n  \"include\": [\n    \"next-env.d.ts\",\n    \"**/*.ts\",\n    \"**/*.tsx\",\n    \".next/types/**/*.ts\",\n    \".next/dev/types/**/*.ts\",\n    \"**/*.mts\"\n  ],\n  \"exclude\": [\"node_modules\"]\n}\n",
    ".env.example": "# Twitter OAuth 2.0 (for user login)\nTWITTER_CLIENT_ID=your_client_id\nTWITTER_CLIENT_SECRET=your_client_secret\n\n# NextAuth\nAUTH_SECRET=generate_with_openssl_rand_base64_32\nNEXTAUTH_URL=http://localhost:3000\n\n# Twitter OAuth 1.0a (for owner posting - @miyamotolabs)\nTWITTER_API_KEY=your_api_key\nTWITTER_API_SECRET=your_api_secret\nTWITTER_ACCESS_TOKEN=your_access_token\nTWITTER_ACCESS_SECRET=your_access_token_secret\n"
  }
}